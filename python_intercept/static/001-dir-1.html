<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <title>001 任意目录读取</title>
</head>
<body>
<script>
function GetUrlRelativePath(){
    var url = document.location.toString();
    var arrUrl = url.split("//");
    var start = arrUrl[1].indexOf("/");
    var relUrl = arrUrl[1].substring(start);
    if(relUrl.indexOf("?") != -1){
        relUrl = relUrl.split("?")[0];
    }
    return relUrl;
}

function getXMLHttpRequest(){
    var xmlhttp;
    if (window.XMLHttpRequest){
        xmlhttp=new XMLHttpRequest();
    }
    else{
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    return xmlhttp;
}

function send_json(){
    data = "{%22dirname%22:%22../../../../../../../../../../../../../../../var/log/%22}"
    var xmlhttp=getXMLHttpRequest();
    xmlhttp.onreadystatechange=function(){
        if (xmlhttp.readyState==4 && xmlhttp.status==200){
            document.body.innerHTML = "";
            document.write(xmlhttp.responseText);
        }
    }
    url = GetUrlRelativePath()
    xmlhttp.open("POST", url, true);
    xmlhttp.setRequestHeader("Content-type","application/json;charset=UTF-8");
    xmlhttp.send(data);
}
</script>

    <h1>001 - 使用 File.listFiles 遍历目录（有路径拼接）</h1>

<p>正常调用: </p>
<p>curl '<a href="#" target="_blank"><%=request.getRequestURL() + normal_querystring%></a>'</p>

<p>不正常调用 - Linux: </p>
<p>curl '<a href="#" target="_blank"><%=request.getRequestURL() + linux_querystring%></a>'</p>

<p>不正常调用 - Linux: </p>
<p><a href=# onclick=send_json() ><%=linux_json_curl%></a></p>

<p>不正常调用 - Windows: </p>
<p>curl '<a href="#" target="_blank"><%=request.getRequestURL() + windows_querystring %></a>'</p>

</body>
</html>
